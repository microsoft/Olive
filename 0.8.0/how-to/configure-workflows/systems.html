
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>How To Configure Systems &#8212; Olive  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/header.css?v=5dcc4e7b" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'how-to/configure-workflows/systems';</script>
    <script src="../../_static/js/custom_version.js?v=3856a39b"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Examples" href="../../examples.html" />
    <link rel="prev" title="Packaging Olive artifacts" href="model-packaging.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.8.0" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Olive  documentation</p>
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../why-olive.html">
    Overview
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../getting-started/getting-started.html">
    Getting started
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    How-to
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../examples.html">
    Examples
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../features/index.html">
    Features
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../reference/index.html">
    Reference
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../extending/index.html">
    Extending Olive
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/microsoft/Olive" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/olive-ai" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-custom fa-pypi fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../why-olive.html">
    Overview
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../getting-started/getting-started.html">
    Getting started
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    How-to
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../examples.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../features/index.html">
    Features
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../reference/index.html">
    Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../extending/index.html">
    Extending Olive
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/microsoft/Olive" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/olive-ai" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-custom fa-pypi fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">How-to</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">How To Configure Systems</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="how-to-configure-systems">
<h1>How To Configure Systems<a class="headerlink" href="#how-to-configure-systems" title="Link to this heading">#</a></h1>
<p>A system is a environment concept (OS, hardware spec, device platform, supported EP) that a Pass is run in or a Model is evaluated on.</p>
<p>There are five systems in Olive: <strong>local system</strong>, <strong>Python environment system</strong>, <strong>Docker system</strong>, <strong>AzureML system</strong>, <strong>Isolated ORT system</strong>. Each system is categorized in one of two types of systems: <strong>host</strong> and <strong>target</strong>. A <strong>host</strong> is the environment where the Pass is run, and a <strong>target</strong> is the environment where the Model is evaluated. Most of time, the <strong>host</strong> and <strong>target</strong> are the same, but they can be different in some cases. For example, you can run a Pass on a local machine with a CPU and evaluate a Model on a remote machine with a GPU.</p>
<section id="accelerator-configuration">
<h2>Accelerator Configuration<a class="headerlink" href="#accelerator-configuration" title="Link to this heading">#</a></h2>
<p>For each <strong>host</strong> or <strong>target</strong>, it will represent list of accelerators that are supported by the system. Each accelerator is represented by a dictionary with the following attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">device</span></code>: The device type of the accelerator. It could be “cpu”, “gpu”, “npu”, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">execution_providers</span></code>: The execution provider list that are supported by the accelerator. For example, <code class="docutils literal notranslate"><span class="pre">[&quot;CUDAExecutionProvider&quot;,</span> <span class="pre">&quot;CPUExecutionProvider&quot;]</span></code>.</p></li>
</ul>
<p>The <strong>host</strong> only use the <code class="docutils literal notranslate"><span class="pre">device</span></code> attribute to run the passes. Instead, the <strong>target</strong> uses both <code class="docutils literal notranslate"><span class="pre">device</span></code> and <code class="docutils literal notranslate"><span class="pre">execution_providers</span></code> attributes to run passes or evaluate models.</p>
</section>
<section id="local-system">
<h2>Local System<a class="headerlink" href="#local-system" title="Link to this heading">#</a></h2>
<p>The local system represents the local machine where the Pass is run or the Model is evaluated and it only contains the accelerators attribute.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;systems&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;local_system&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LocalSystem&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;accelerators&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cpu&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;execution_providers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;CPUExecutionProvider&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;engine&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;local_system&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Local system doesn’t support <code class="docutils literal notranslate"><span class="pre">olive_managed_env</span></code>.</p></li>
<li><p>The accelerators attribute for local system is optional. If not provided, Olive will get the available execution providers installed in the current local machine and infer its <code class="docutils literal notranslate"><span class="pre">device</span></code>.</p></li>
<li><p>For each accelerator, either <code class="docutils literal notranslate"><span class="pre">device</span></code> or ``execution_providers<code class="docutils literal notranslate"><span class="pre">is</span> <span class="pre">optional</span> <span class="pre">but</span> <span class="pre">not</span> <span class="pre">both</span> <span class="pre">if</span> <span class="pre">the</span> <span class="pre">accelerators</span> <span class="pre">are</span> <span class="pre">specified.</span> <span class="pre">If</span></code>device<code class="docutils literal notranslate"><span class="pre">or</span></code>execution_providers<code class="docutils literal notranslate"><span class="pre">is</span> <span class="pre">not</span> <span class="pre">provided,</span> <span class="pre">Olive</span> <span class="pre">will</span> <span class="pre">infer</span> <span class="pre">the</span></code>device<code class="docutils literal notranslate"><span class="pre">or</span></code>execution_providers` if possible.</p></li>
</ul>
<p>Most of time, the local system could be simplified as below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{
    &quot;type&quot;: &quot;LocalSystem&quot;
}
</pre></div>
</div>
<p>In this case, Olive will infer the <code class="docutils literal notranslate"><span class="pre">device</span></code> and <code class="docutils literal notranslate"><span class="pre">execution_providers</span></code> based on the local machine. Please note the <code class="docutils literal notranslate"><span class="pre">device</span></code> attribute is required for <strong>host</strong> since it will not be inferred for host system.</p>
</div>
</section>
<section id="python-environment-system">
<h2>Python Environment System<a class="headerlink" href="#python-environment-system" title="Link to this heading">#</a></h2>
<p>The python environment system represents the python virtual environment. The python environment system is configured with the following attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">accelerators</span></code>: The list of accelerators that are supported by the system.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python_environment_path</span></code>: The path to the python virtual environment, which is required for native python system.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">environment_variables</span></code>: The environment variables that are required to run the python environment system. This is optional.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prepend_to_path</span></code>: The path that will be prepended to the PATH environment variable. This is optional.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">olive_managed_env</span></code>: A boolean flag to indicate if the environment is managed by Olive. This is optional and defaults to False.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">requirements_file</span></code>: The path to the requirements file, which is only required and used when <code class="docutils literal notranslate"><span class="pre">olive_managed_env</span> <span class="pre">=</span> <span class="pre">True</span></code>.</p></li>
</ul>
<section id="native-python-environment-system">
<h3>Native Python Environment System<a class="headerlink" href="#native-python-environment-system" title="Link to this heading">#</a></h3>
<p>Here are the examples of configuring the general Python Environment System.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;systems&quot;</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;python_system&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PythonEnvironment&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;python_environment_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/home/user/.virtualenvs/myenv/bin&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;accelerators&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cpu&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;execution_providers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="s2">&quot;CPUExecutionProvider&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;OpenVINOExecutionProvider&quot;</span>
<span class="w">                    </span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;engine&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;python_system&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The python environment must have <code class="docutils literal notranslate"><span class="pre">olive-ai</span></code> installed if <code class="docutils literal notranslate"><span class="pre">olive_managed_env</span> <span class="pre">=</span> <span class="pre">False</span></code>.</p></li>
<li><p>The accelerators for python system is optional. If not provided, Olive will get the available execution providers installed in current python virtual environment and infer its <code class="docutils literal notranslate"><span class="pre">device</span></code>.</p></li>
<li><p>For each accelerator, either <code class="docutils literal notranslate"><span class="pre">device</span></code> or <code class="docutils literal notranslate"><span class="pre">execution_providers</span></code> is optional but not both if the accelerators are specified. If <code class="docutils literal notranslate"><span class="pre">device</span></code> or <code class="docutils literal notranslate"><span class="pre">execution_providers</span></code> is not provided, Olive will infer the <code class="docutils literal notranslate"><span class="pre">device</span></code> or <code class="docutils literal notranslate"><span class="pre">execution_providers</span></code> if possible.</p></li>
</ul>
</div>
</section>
<section id="managed-python-environment-system">
<h3>Managed Python Environment System<a class="headerlink" href="#managed-python-environment-system" title="Link to this heading">#</a></h3>
<p>When <code class="docutils literal notranslate"><span class="pre">olive_managed_env</span> <span class="pre">=</span> <span class="pre">True</span></code>, Olive will manage the python environment by installing the required packages from the <code class="docutils literal notranslate"><span class="pre">requirements_file</span></code>. As the result, the <code class="docutils literal notranslate"><span class="pre">requirements_file</span></code> is required and must be provided.</p>
<p>For managed python environment system, Olive can only infer the onnxruntime from the following onnxruntime execution providers:</p>
<ul class="simple">
<li><p>CPUExecutionProvider: (<em>onnxruntime</em>)</p></li>
<li><p>CUDAExecutionProvider: (<em>onnxruntime-gpu</em>)</p></li>
<li><p>TensorrtExecutionProvider: (<em>onnxruntime-gpu</em>)</p></li>
<li><p>OpenVINOExecutionProvider: (<em>onnxruntime-openvino</em>)</p></li>
<li><p>DmlExecutionProvider: (<em>onnxruntime-directml</em>)</p></li>
</ul>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PythonEnvironment&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;accelerators&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cpu&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;execution_providers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">&quot;CPUExecutionProvider&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;OpenVINOExecutionProvider&quot;</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;olive_managed_env&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please refer to <a class="reference external" href="https://github.com/microsoft/Olive/blob/main/examples/resnet/resnet_multiple_ep.json">this example</a>
for how to use managed python environment system to optimize the model against different execution providers.</p>
</div>
</section>
</section>
<section id="docker-system">
<h2>Docker System<a class="headerlink" href="#docker-system" title="Link to this heading">#</a></h2>
<p>The docker system represents the docker container where the Pass is run or the Model is evaluated. It can be configured as a native system or a managed system. The docker system is configured with the following attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">accelerators</span></code>: The list of accelerators that are supported by the system.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">local_docker_config</span></code>: The configuration for the local docker system, which includes the following attributes:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">image_name</span></code>: The name of the docker image.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">build_context_path</span></code>: The path to the build context.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dockerfile</span></code>: The path to the Dockerfile.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">requirements_file</span></code>: The path to the requirements file. If provided, Olive will install the required packages from the requirements file in the docker container.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">olive_managed_env</span></code>: A boolean flag to indicate if the environment is managed by Olive. This is optional and defaults to False.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>the <code class="docutils literal notranslate"><span class="pre">build_context_path</span></code>, <code class="docutils literal notranslate"><span class="pre">dockerfile</span></code> and <code class="docutils literal notranslate"><span class="pre">requirements_file</span></code> cannot be <code class="docutils literal notranslate"><span class="pre">None</span></code> at the same time.</p></li>
<li><p>The docker container must have <code class="docutils literal notranslate"><span class="pre">olive-ai</span></code> installed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">device</span></code> and <code class="docutils literal notranslate"><span class="pre">execution_providers</span></code> for docker system is mandatory. Otherwise, Olive will raise an error.</p></li>
</ul>
</div>
<section id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Docker Engine installed on the host machine.</p></li>
<li><p>docker extra dependencies installed. <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">olive-ai[docker]</span></code> or <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">docker</span></code></p></li>
</ol>
</section>
<section id="native-docker-system">
<h3>Native Docker System<a class="headerlink" href="#native-docker-system" title="Link to this heading">#</a></h3>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Docker&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;local_docker_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;image_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;olive&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;build_context_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;docker&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;dockerfile&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Dockerfile&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;accelerators&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cpu&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;execution_providers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;CPUExecutionProvider&quot;</span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="managed-docker-system">
<h3>Managed Docker System<a class="headerlink" href="#managed-docker-system" title="Link to this heading">#</a></h3>
<p>When <code class="docutils literal notranslate"><span class="pre">olive_managed_env</span> <span class="pre">=</span> <span class="pre">True</span></code>, Olive will manage the docker environment by installing the required packages from the <code class="docutils literal notranslate"><span class="pre">requirements_file</span></code> in the docker container if provided.
From the time being, Olive only supports the following base Dockerfiles based on input execution providers:</p>
<ul class="simple">
<li><p>CPUExecutionProvider: (<em>Dockerfile.cpu</em>)</p></li>
<li><p>CUDAExecutionProvider: (<em>Dockerfile.gpu</em>)</p></li>
<li><p>TensorrtExecutionProvider: (<em>Dockerfile.gpu</em>)</p></li>
<li><p>OpenVINOExecutionProvider: (<em>Dockerfile.openvino</em>)</p></li>
</ul>
<p>A typical managed Docker system can be configured by the following example:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Docker&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;accelerators&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cpu&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;execution_providers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">&quot;CPUExecutionProvider&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;OpenVINOExecutionProvider&quot;</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;olive_managed_env&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;requirements_file&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mnist_requirements.txt&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="azureml-system">
<h2>AzureML System<a class="headerlink" href="#azureml-system" title="Link to this heading">#</a></h2>
<p>The AzureML system represents the Azure Machine Learning workspace where the Pass is run or the Model is evaluated. It can be configured as a native system or a managed system. The AzureML system is configured with the following attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">accelerators</span></code>: The list of accelerators that are supported by the system, which is required.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aml_compute</span></code>: The name of the AzureML compute, which is required.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">azureml_client_config</span></code>: The configuration for the AzureML client, which includes the following attributes:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">subscription_id</span></code>: The subscription id of the AzureML workspace.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resource_group</span></code>: The resource group of the AzureML workspace.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">workspace_name</span></code>: The name of the AzureML workspace.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">aml_docker_config</span></code>: The configuration for the AzureML docker system, which includes the following attributes:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">base_image</span></code>: The base image for the AzureML environment.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dockerfile</span></code>: The path to the Dockerfile of the AzureML environment.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">build_context_path</span></code>: The path to the build context of the AzureML environment.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">conda_file_path</span></code>: The path to the conda file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: The name of the AzureML environment.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">version</span></code>: The version of the AzureML environment.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">aml_environment_config</span></code>: The configuration for the AzureML environment, which includes the following attributes:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: The name of the AzureML environment.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">version</span></code>: The version of the AzureML environment.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">label</span></code>: The label of the AzureML environment.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">requirements_file</span></code>: The path to the requirements file. If provided, Olive will install the required packages from the requirements file in the AzureML environment.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tags</span></code>: The tags for the AzureML environment. This is optional.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resources</span></code>: The resources dictionary for the AzureML environment. This is optional.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">instance_count</span></code>: The instance count for the AzureML environment. Default is 1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">datastore</span></code>: The datastore name where to export artifacts. Default is <code class="docutils literal notranslate"><span class="pre">workspaceblobstore</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">olive_managed_env</span></code>: A boolean flag to indicate if the environment is managed by Olive. This is optional and defaults to False.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Both <code class="docutils literal notranslate"><span class="pre">aml_docker_config</span></code> and <code class="docutils literal notranslate"><span class="pre">aml_environment_config</span></code> cannot be <code class="docutils literal notranslate"><span class="pre">None</span></code> at the same time.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">aml_environment_config</span></code> is provided, Olive will use the existing AzureML environment with the specified name, version and label.</p></li>
<li><p>Otherwise, Olive will create a new AzureML environment using the <code class="docutils literal notranslate"><span class="pre">aml_docker_config</span></code> configuration.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">azureml_client_config</span></code> will be propagated from engine <code class="docutils literal notranslate"><span class="pre">azureml_client</span></code> if not provided.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">requirements_file</span></code> is only used when <code class="docutils literal notranslate"><span class="pre">olive_managed_env</span> <span class="pre">=</span> <span class="pre">True</span></code> to install the required packages in the AzureML environment.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">device</span></code> and <code class="docutils literal notranslate"><span class="pre">execution_providers</span></code> for AzureML system is mandatory. Otherwise, Olive will raise an error.</p></li>
</ul>
</div>
<section id="id1">
<h3>Prerequisites<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>The azureml extra dependencies are installed with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">olive-ai[azureml]</span></code> or <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">azure-ai-ml</span> <span class="pre">azure-identity</span></code>.</p></li>
<li><p>AzureML Workspace with necessary compute created. Read <a class="reference external" href="https://learn.microsoft.com/en-us/azure/machine-learning/concept-workspace">Azure Machine Learning Workspace</a> for more details. Download
the workspace config json.</p></li>
</ol>
</section>
<section id="native-azureml-system">
<h3>Native AzureML System<a class="headerlink" href="#native-azureml-system" title="Link to this heading">#</a></h3>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AzureML&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;accelerators&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gpu&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;execution_providers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">&quot;CUDAExecutionProvider&quot;</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;aml_compute&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gpu-cluster&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;aml_docker_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;base_image&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mcr.microsoft.com/azureml/openmpi4.1.0-cuda11.8-cudnn8-ubuntu22.04&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;conda_file_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;conda.yaml&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;aml_environment_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;myenv&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="azureml-readymade-systems">
<h3>AzureML Readymade Systems<a class="headerlink" href="#azureml-readymade-systems" title="Link to this heading">#</a></h3>
<p>There are some readymade systems available for AzureML. These systems are pre-configured with the necessary.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AzureNDV2System&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;accelerators&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="nt">&quot;device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gpu&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;execution_providers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;CUDAExecutionProvider&quot;</span><span class="p">]},</span>
<span class="w">        </span><span class="p">{</span><span class="nt">&quot;device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cpu&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;execution_providers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;CPUExecutionProvider&quot;</span><span class="p">]},</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;aml_compute&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gpu-cluster&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;aml_docker_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;base_image&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mcr.microsoft.com/azureml/openmpi4.1.0-ubuntu22.04&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;conda_file_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;conda.yaml&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>System alias list:</p>
<ul class="simple">
<li><p>AzureND12SSystem:</p>
<ul>
<li><p>sku: “STANDARD_ND12S”</p></li>
<li><p>num_cpus: 12</p></li>
<li><p>num_gpus: 2</p></li>
</ul>
</li>
<li><p>AzureND24RSSystem:</p>
<ul>
<li><p>sku: “STANDARD_ND24RS”</p></li>
<li><p>num_cpus: 24</p></li>
<li><p>num_gpus: 4</p></li>
</ul>
</li>
<li><p>AzureND24SSystem:</p>
<ul>
<li><p>sku: “STANDARD_ND24S”</p></li>
<li><p>num_cpus: 24</p></li>
<li><p>num_gpus: 4</p></li>
</ul>
</li>
<li><p>AzureNDV2System:</p>
<ul>
<li><p>sku: “STANDARD_ND40RS_V2”</p></li>
<li><p>num_cpus: 40</p></li>
<li><p>num_gpus: 8</p></li>
</ul>
</li>
<li><p>AzureND6SSystem:</p>
<ul>
<li><p>sku: “STANDARD_ND6S”</p></li>
<li><p>num_cpus: 6</p></li>
<li><p>num_gpus: 1</p></li>
</ul>
</li>
<li><p>AzureND96A100System:</p>
<ul>
<li><p>sku: “STANDARD_ND96AMSR_A100_V4”</p></li>
<li><p>num_cpus: 96</p></li>
<li><p>num_gpus: 8</p></li>
</ul>
</li>
<li><p>AzureND96ASystem:</p>
<ul>
<li><p>sku: “STANDARD_ND96ASR_V4”</p></li>
<li><p>num_cpus: 96</p></li>
<li><p>num_gpus: 8</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The accelerators specified in the readymade systems will be filtered against the devices supported by the readymade system. If the specified device is not supported by the readymade system, Olive will filter out the accelerator.
In above example, the readymade system supports only GPU. Therefore, the final accelerators will be <code class="docutils literal notranslate"><span class="pre">[{&quot;device&quot;:</span> <span class="pre">&quot;gpu&quot;,</span> <span class="pre">&quot;execution_providers&quot;:</span> <span class="pre">[&quot;CUDAExecutionProvider&quot;]}]</span></code> and the CPU will be filtered out.</p>
</div>
</section>
<section id="managed-azureml-system">
<h3>Managed AzureML System<a class="headerlink" href="#managed-azureml-system" title="Link to this heading">#</a></h3>
<p>When <code class="docutils literal notranslate"><span class="pre">olive_managed_env</span> <span class="pre">=</span> <span class="pre">True</span></code>, Olive will manage the AzureML environment by installing the required packages from the <code class="docutils literal notranslate"><span class="pre">requirements_file</span></code> in the AzureML environment if provided.</p>
<p>Currently, Olive supports the following base Dockerfiles based on input execution providers:</p>
<ul class="simple">
<li><p>CPUExecutionProvider: (<em>Dockerfile.cpu</em>)</p></li>
<li><p>CUDAExecutionProvider: (<em>Dockerfile.gpu</em>)</p></li>
<li><p>TensorrtExecutionProvider: (<em>Dockerfile.gpu</em>)</p></li>
<li><p>OpenVINOExecutionProvider: (<em>Dockerfile.openvino</em>)</p></li>
</ul>
<p>A typical managed AzureML system can be configured by the following example:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;systems&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;azureml_system&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AzureML&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;accelerators&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cpu&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;execution_providers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="s2">&quot;CPUExecutionProvider&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;OpenVINOExecutionProvider&quot;</span>
<span class="w">                    </span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;azureml_client_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;subscription_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;subscription_id&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;resource_group&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;resource_group&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;workspace_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;workspace_name&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;aml_compute&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cpu-cluster&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;requirements_file&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mnist_requirements.txt&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;olive_managed_env&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;engine&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;azureml_system&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="isolated-ort-system">
<h2>Isolated ORT System<a class="headerlink" href="#isolated-ort-system" title="Link to this heading">#</a></h2>
<p>The isolated ORT system represents the isolated ONNX Runtime environment in which the <code class="docutils literal notranslate"><span class="pre">olive-ai</span></code> is not installed. It can only be configured as a target system. The isolated ORT system is configured with the following attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">accelerators</span></code>: The list of accelerators that are supported by the system.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python_environment_path</span></code>: The path to the python virtual environment.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">environment_variables</span></code>: The environment variables that are required to run the python environment. This is optional.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prepend_to_path</span></code>: The path that will be prepended to the PATH environment variable. This is optional.</p></li>
</ul>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;IsolatedORT&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;python_environment_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/home/user/.virtualenvs/myenv/bin&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;accelerators&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nt">&quot;device&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cpu&quot;</span><span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Isolated ORT System does not support <code class="docutils literal notranslate"><span class="pre">olive_managed_env</span></code> and can only be used to evaluate ONNX models.</p></li>
<li><p>The accelerators for Isolated ORT system is optional. If not provided, Olive will get the available execution providers installed in current virtual environment and infer its device.</p></li>
<li><p>For each accelerator, either <code class="docutils literal notranslate"><span class="pre">device</span></code> or <code class="docutils literal notranslate"><span class="pre">execution_providers</span></code> is optional but not both if the accelerators are specified. If <code class="docutils literal notranslate"><span class="pre">device</span></code> or <code class="docutils literal notranslate"><span class="pre">execution_providers</span></code> is not provided, Olive will infer the <code class="docutils literal notranslate"><span class="pre">device</span></code> or <code class="docutils literal notranslate"><span class="pre">execution_providers</span></code> if possible.</p></li>
</ul>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="model-packaging.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Packaging Olive artifacts</p>
      </div>
    </a>
    <a class="right-next"
       href="../../examples.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Examples</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#accelerator-configuration">Accelerator Configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#local-system">Local System</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#python-environment-system">Python Environment System</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#native-python-environment-system">Native Python Environment System</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#managed-python-environment-system">Managed Python Environment System</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#docker-system">Docker System</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#prerequisites">Prerequisites</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#native-docker-system">Native Docker System</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#managed-docker-system">Managed Docker System</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#azureml-system">AzureML System</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Prerequisites</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#native-azureml-system">Native AzureML System</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#azureml-readymade-systems">AzureML Readymade Systems</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#managed-azureml-system">Managed AzureML System</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#isolated-ort-system">Isolated ORT System</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2023-2025, Olive Dev team.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>