

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cloud Model Cache &mdash; Olive  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/width.css?v=b55249da" />
      <link rel="stylesheet" type="text/css" href="../_static/css/header.css?v=5dcc4e7b" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=b3ba4146"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
      <script src="../_static/js/custom_version.js?v=3856a39b"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Remote Workflow" href="run_workflow_remotely.html" />
    <link rel="prev" title="Packaging Olive artifacts" href="packaging_output_models.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Olive
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">OVERVIEW</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/olive.html">Olive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/quicktour.html">Quick Tour</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/options.html">Olive Options</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">GET STARTED</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getstarted/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getstarted/quickstart_examples.html">Quickstart Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">EXAMPLES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">OLIVE COMMANDS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Run</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html#finetune">Finetune</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html#auto-optimization">Auto-Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html#quantization">Quantization</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html#capture-onnx-graph">Capture Onnx Graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html#generate-adapters">Generate Adapters</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html#convert-adapters">Convert Adapters</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html#tune-onnxruntime-session-params">Tune OnnxRuntime Session Params</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html#qualcomm-sdk">Qualcomm SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html#azureml">AzureML</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html#cloud-cache">Cloud Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html#providing-input-models">Providing Input Models</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FEATURES</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="azureml_integration.html">Azure ML integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="huggingface_model_optimization.html">Huggingface Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="lora.html">LoRA Adapters</a></li>
<li class="toctree-l1"><a class="reference internal" href="packaging_output_models.html">Packaging Olive artifacts</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Cloud Model Cache</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-cloud-model-cache">What is Cloud Model Cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-use-cloud-model-cache">How to use Cloud Model Cache</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#install-extra-dependencies">Install Extra Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#azure-blob-storage">Azure Blob Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cloud-cache-configuration">Cloud Cache Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="run_workflow_remotely.html">Remote Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="conversion.html">Model Conversions</a></li>
<li class="toctree-l1"><a class="reference internal" href="quantization.html">Model Quantizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_transformations_and_optimizations.html">Model Transformations and Optimizations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">EXTENDING OLIVE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../extending_olive/design.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending_olive/how_to_add_optimization_pass.html">How to add new optimization Pass</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending_olive/custom_scripts.html">Custom Scripts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">TUTORIALS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/configure_systems.html">How To Configure System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/configure_metrics.html">How To Configure Metric</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/configure_auto_optimizer.html">How To Configure Auto Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/configure_pass.html">How To Configure Pass</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/configure_data.html">How To Configure Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/configure_model_path.html">How To Set Model Path</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/advanced_users.html">Advanced User Tour</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/azure_arc.html">Self-hosted Kubernetes cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/azureml_scripts.html">Azure ML scripts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API REFERENCE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/models.html">OliveModels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/resource_path.html">ResourcePath</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/systems.html">OliveSystems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/evaluator.html">OliveEvaluator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/metric.html">Metric</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/search-algorithms.html">SearchAlgorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/engine.html">Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/passes.html">Passes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Olive</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Cloud Model Cache</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/features/cloud_model_cache.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="cloud-model-cache">
<h1>Cloud Model Cache<a class="headerlink" href="#cloud-model-cache" title="Permalink to this heading"></a></h1>
<section id="what-is-cloud-model-cache">
<h2>What is Cloud Model Cache<a class="headerlink" href="#what-is-cloud-model-cache" title="Permalink to this heading"></a></h2>
<p>The Cloud Model Cache is a system where Olive stores intermediate models in Azure Blob Storage. Whenever a Pass is executed, Olive checks if the same input model has been processed before and if the corresponding output model is available in Azure Blob Storage. If the output model is found, Olive directly uses it for the next step. With this feature, you can easily share output models with others.</p>
<p>This feature currently only supports native Huggingface models as input.</p>
</section>
<section id="how-to-use-cloud-model-cache">
<h2>How to use Cloud Model Cache<a class="headerlink" href="#how-to-use-cloud-model-cache" title="Permalink to this heading"></a></h2>
<section id="install-extra-dependencies">
<h3>Install Extra Dependencies<a class="headerlink" href="#install-extra-dependencies" title="Permalink to this heading"></a></h3>
<p>You can install the necessary dependencies by running:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>olive-ai<span class="o">[</span>azureml<span class="o">]</span>
</pre></div>
</div>
</section>
<section id="azure-blob-storage">
<h3>Azure Blob Storage<a class="headerlink" href="#azure-blob-storage" title="Permalink to this heading"></a></h3>
<p>Olive uses Azure Blob Storage for the Cloud Model Cache, so you’ll need a prepared container for this feature. Learn more about Azure Blob Storage <a class="reference external" href="https://learn.microsoft.com/en-us/azure/storage/blobs/storage-blobs-introduction">here</a>.</p>
<p>Once your container is ready, locate the account URL and container name on your storage account page. The account URL typically looks like <code class="docutils literal notranslate"><span class="pre">https://&lt;account_url&gt;.blob.core.windows.net</span></code>.</p>
<p>Please make sure you have logged in Azure with command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>az<span class="w"> </span>login
</pre></div>
</div>
</section>
<section id="cloud-cache-configuration">
<h3>Cloud Cache Configuration<a class="headerlink" href="#cloud-cache-configuration" title="Permalink to this heading"></a></h3>
<p>Add <code class="docutils literal notranslate"><span class="pre">cloud_cache_config</span></code> to the configuration:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cloud_cache_config</span></code>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_cloud_cache</span> <span class="pre">[bool]</span></code>: Whether to enable cloud cache. Default by <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">account_url</span> <span class="pre">[str]</span></code>: The account url from the Azure Storage account.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">container_name</span> <span class="pre">[str]</span></code>: The container name to store model cache.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">upload_to_cloud</span> <span class="pre">[bool]</span></code>: Whether to upload output model to the cloud cache for this workflow run. Default by <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</li>
</ul>
<p>Here is an example configuration:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="c1">//...</span>
<span class="w">    </span><span class="nt">&quot;cloud_cache_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;account_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://&lt;account_url&gt;.blob.core.windows.net&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;container_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;olivecachemodel&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="c1">//...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>With this configuration, Olive will check if a cached model exists in your blob container. If you only want to download cached models from the blob without uploading the output models, set <code class="docutils literal notranslate"><span class="pre">upload_to_cloud</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code> in the <code class="docutils literal notranslate"><span class="pre">cloud_cache_config</span></code>.</p>
</section>
</section>
<section id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>If the output model is found in the cloud cache and evaluation is needed, Olive will download the output model from the cloud cache.</p></li>
<li><p>If the output model is found in the cloud cache and no evaluation is needed, Olive will check for cached models for the next Pass instead of immediately downloading the current cached model. If a cached model for the next Pass is found, Olive will skip downloading the intermediate model and proceed directly to the next Pass. This process will continue until the final Pass is completed or no cached model is found.</p></li>
<li><p>When this feature is enabled, the workflow running time may be affected, potentially making it faster or slower. Since Olive will download output models, factors that can influence this include the size of the output model, your internet speed, the number of Passes, and how many intermediate models are cached in the cloud cache.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="packaging_output_models.html" class="btn btn-neutral float-left" title="Packaging Olive artifacts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="run_workflow_remotely.html" class="btn btn-neutral float-right" title="Remote Workflow" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, olivedevteam@microsoft.com.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>